!function(r,s){r(document).ready(function(){jconfirm.defaults={closeIcon:!0,backgroundDismiss:!0,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",columnClass:"evf-responsive-class"}}),r(".evf-colorpicker").wpColorPicker({change:function(e,s){},hide:!0,border:!0}),r(".evf-colorpicker").on("click",function(e){e.stopPropagation();e=r(this).closest(".everest-forms-global-settings--field").find(".wp-picker-container .iris-picker");e.is(":visible")?e.hide():(r(".iris-picker").hide(),e.show())}),r("body").on("click",function(){r(".iris-picker").hide()}),r(".wp-picker-container").on("click",function(e){e.stopPropagation()}),r(function(){var e=!1;r("input, textarea, select, checkbox").change(function(){e=!0}),r(".evf-nav-tab-wrapper a").click(function(){window.onbeforeunload=e?function(){return s.i18n_nav_warning}:""}),r(".submit :input").click(function(){window.onbeforeunload=""})}),r(".everest-forms").on("click",".select_all",function(){return r(this).closest("td").find("select option").attr("selected","selected"),r(this).closest("td").find("select").trigger("change"),!1}),r(".everest-forms").on("click",".select_none",function(){return r(this).closest("td").find("select option").removeAttr("selected"),r(this).closest("td").find("select").trigger("change"),!1}),r("input#everest_forms_recaptcha_v2_invisible").on("change",function(){var e=r("#everest_forms_recaptcha_v2_site_key").closest(".everest-forms-global-settings"),s=r("#everest_forms_recaptcha_v2_secret_key").closest(".everest-forms-global-settings"),t=r("#everest_forms_recaptcha_v2_invisible_site_key").closest(".everest-forms-global-settings"),o=r("#everest_forms_recaptcha_v2_invisible_secret_key").closest(".everest-forms-global-settings");r(this).is(":checked")?(e.hide(),s.hide(),t.removeClass("everest-forms-hidden").show(),o.removeClass("everest-forms-hidden").show()):(e.show(),s.show(),t.addClass("everest-forms-hidden").hide(),o.addClass("everest-forms-hidden").hide())}).trigger("change"),r(".everest_forms_send_email_test").on("click",function(e){e.preventDefault();e={action:"everest_forms_send_test_email",email:r("#everest_forms_email_send_to").val(),security:evf_email_params.ajax_email_nonce};r.ajax({url:evf_email_params.ajax_url,data:e,type:"post",beforeSend:function(){r(".everest_forms_send_email_test").closest(".everest_forms_send_email_test").append('<i class="evf-loading evf-loading-active"></i>')},complete:function(e){r(".everest_forms_send_email_test").closest(".everest_forms_send_email_test").find(".evf-loading").remove(),!0===e.responseJSON.success?window.evfShowToast(e.responseJSON.data.message,"success",5e3):window.evfShowToast(e.responseJSON.data.message,"error",5e3)}})}),r("#evf-settings-collapse").on("click",function(e){var s,t;e.preventDefault(),r(this).hasClass("close")?(r(this).closest("header").addClass("collapsed"),r(this).removeClass("close").addClass("open"),e="evf-settings-navCollapsed",s=!0,t=new Date,s={value:s,expiry:t.getTime()+864e5},localStorage.setItem(e,JSON.stringify(s))):(r(this).closest("header").removeClass("collapsed"),r(this).removeClass("open").addClass("close"),localStorage.removeItem("evf-settings-navCollapsed"))});var t,o,e=!0===n("evf-settings-navCollapsed")?"collapsed":"not-collapsed";function n(e){var s=localStorage.getItem(e);return!(!s||(s=JSON.parse(s),(new Date).getTime()>s.expiry&&(localStorage.removeItem(e),1)))}n("evf-settings-navCollapsed"),"collapsed"==e?(r(".everest-forms-header").addClass("collapsed"),r("#evf-settings-collapse").removeClass("close").addClass("open")):(r(".everest-forms-header").removeClass("collapsed"),r("#evf-settings-collapse").removeClass("open").addClass("close")),r(".everest_forms_send_routine_report_test_email").on("click",function(e){e.preventDefault();e={action:"everest_forms_send_routine_report_test_email",email:r("#everest_forms_email_send_to").val(),security:evf_email_params.ajax_email_nonce};r.ajax({url:evf_email_params.ajax_url,data:e,type:"post",beforeSend:function(){r(".everest_forms_send_routine_report_test_email").closest(".everest_forms_send_routine_report_test_email").append('<i class="evf-loading evf-loading-active"></i>'),r(".everest-froms-send_test_email_notice").remove()},complete:function(e){var s="";r(".everest_forms_send_routine_report_test_email").closest(".everest_forms_send_routine_report_test_email").find(".evf-loading").remove(),r(".everest-froms-send_test_email_notice").remove(),!0===e.responseJSON.success?(s='<div id="message" class="updated inline everest-froms-send_test_email_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>",r(".everest-forms-options-header").append(s)):s='<div id="message" class="error inline everest-froms-send_test_email_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>",r(".everest-forms-settings").find("h2").after(s)}})}),r(".everest-forms-accordion-wrapper").on("click",".everest-forms-accordion-header",function(e){e.preventDefault();var e=r(this).closest(".everest-forms-accordion-item"),s=e.find(".everest-forms-accordion-content");e.toggleClass("is-open"),s.slideToggle(300)}),r(document).ready(function(){r(".everest-forms-accordion-item").each(function(){r(this).hasClass("is-open")||r(this).find(".everest-forms-accordion-content").hide()}),r(document).on("change","#everest_forms_recaptcha_v2_enable, #everest_forms_recaptcha_v3_enable, #everest_forms_recaptcha_hcaptcha_enable, #everest_forms_recaptcha_turnstile_enable",function(){var e,s=r(this),t=s.attr("id");s.is(":checked")?(["#everest_forms_recaptcha_v2_enable","#everest_forms_recaptcha_v3_enable","#everest_forms_recaptcha_hcaptcha_enable","#everest_forms_recaptcha_turnstile_enable"].filter(function(e){return e!=="#"+t}).forEach(function(e){e=r(e),e.prop("checked",!1),e=e.closest(".everest-forms-global-settings--field").find(".description");e.length&&e.text("Enable this CAPTCHA. Note: Enabling this will disable other CAPTCHA providers.")}),(e=s.closest(".everest-forms-global-settings--field").find(".description")).length&&e.text("This CAPTCHA is currently enabled.")):(e=s.closest(".everest-forms-global-settings--field").find(".description")).length&&e.text("Enable this CAPTCHA. Note: Enabling this will disable other CAPTCHA providers.")})}),e=r(".everest-forms").find("form")[0],t=!1,r(e).on("change",function(e){"everest-forms-enable-premium-sidebar"!==e.target.name&&(t=!0)}),o=!1,r(e).on("submit",function(){o=!0}),r(e).find(".evf-nav__link").on("click",function(){o=!0}),r(window).on("beforeunload",function(e){t&&!o?(e.preventDefault(),e.returnValue=""):e.stopImmediatePropagation()})}(jQuery,everest_forms_settings_params);