!function(i,n){window.evfShowToast=function(e,t,r){t=t||"info",r="number"==typeof r?r:4e3;(o=i("#evf-toast-container")).length||(o=i('<div id="evf-toast-container"></div>'),i("body").append(o));var o,n=i('<div class="evf-toast evf-toast-'+t+'"><button type="button" class="evf-toast-close" aria-label="Close">&times;</button><div class="evf-toast-content"></div></div>');function a(e){e.removeClass("is-visible"),setTimeout(function(){e.remove()},250)}n.find(".evf-toast-content").html(e),o.append(n),setTimeout(function(){n.addClass("is-visible")},10),0<r&&setTimeout(function(){a(n)},r),n.on("click",".evf-toast-close",function(){a(n)})},i(document).on("click",".everest-forms-field.everest-forms-field-rating",function(){i(".everest-forms-field-option-row-icon_color input.evf-colorpicker").wpColorPicker({change:function(e){var t=i(this),r=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");i("#everest-forms-field-"+t+" .rating-icon svg").css("fill",r)}})}),i("#toplevel_page_everest-forms .wp-submenu li").each(function(){var e=i(this).find("a");"Upgrade to Pro"===e.text().trim()&&e.attr("target","_blank")}),i(document).ready(function(){var e=new URLSearchParams(window.location.search),t=e.get("evf_toast"),r=e.get("evf_toast_type")||"success";if(t)try{window.evfShowToast(atob(decodeURIComponent(t)),r,5e3),e["delete"]("evf_toast"),e["delete"]("evf_toast_type"),window.history.replaceState({},document.title,window.location.pathname+(e.toString()?"?"+e.toString():""))}catch(a){}t=i("#setting-error-bulk_action.notice");function o(){"Weekly"!==i("#everest_forms_entries_reporting_frequency").val()?i("#everest_forms_entries_reporting_day").closest(".everest-forms-global-settings").hide():i("#everest_forms_entries_reporting_day").closest(".everest-forms-global-settings").show()}t.length&&(r="info",t.hasClass("notice-success")||t.hasClass("updated")?r="success":t.hasClass("notice-error")||t.hasClass("error")?r="error":t.hasClass("notice-warning")&&(r="warning"),e=t.find("p").text().trim())&&(t.remove(),window.evfShowToast(e,r,5e3)),o();var n=i(".evf-entries-tab-wrapper");n.length&&(n.on("click",".evf-tab-nav__btn",function(){var e=i(this),t=e.data("tab");i(".evf-tab-nav__btn",n).removeClass("evf-tab--active").attr("aria-selected","false"),e.addClass("evf-tab--active").attr("aria-selected","true"),i(".evf-tab-panel",n).removeClass("evf-tab-panel--active").attr("hidden",!0),i("#"+t,n).addClass("evf-tab-panel--active").removeAttr("hidden"),i(window).trigger("resize")}),i(".evf-tab-nav__btn",n).first().trigger("click")),i(document).on("change click","#everest_forms_entries_reporting_frequency",o),i(document).ready(function(){i(document).on("change","#filter-by-form",function(){var e=i(this).val(),t=new URL(window.location.href);""!==e?t.searchParams.set("form_id",e):t.searchParams["delete"]("form_id"),window.location.href=t.toString()}),i(document).on("select2:select select2:unselect","#filter-by-form",function(){i(this).trigger("change")})}),i(document).on("change","#filter-by-status",function(){var e=i(this).closest("form"),t=i(this).val();e.find('input[name="status"]').remove(),""!==t&&e.append('<input type="hidden" name="status" value="'+t+'" />'),i(this).prop("disabled",!0),e.submit()}),i(document).on("change","#filter-by-form-status",function(){var e=i(this).val(),t=new URL(window.location.href);""!==e?t.searchParams.set("status",e):t.searchParams["delete"]("status"),t.searchParams.set("page","evf-builder"),t.searchParams["delete"]("paged"),window.location.href=t.toString()}),i("#evf-form-listing__screen-options").on("click",function(){i("#show-settings-link").click()})}),i(document).ready(function(){i(document).on("change","#everest-forms-enable-premium-sidebar",function(){var e=i("#everest-forms-enable-premium-sidebar").is(":checked");localStorage.setItem("isPremiumSidebarEnabled",e),document.cookie="isPremiumSidebarEnabled="+e+"; path=/;",e?(i("body").removeClass("evf-premium-sidebar-hidden").addClass("evf-premium-sidebar-show"),i(".everest-forms-toggle-text").text("Hide Sidebar")):(i("body").removeClass("evf-premium-sidebar-show").addClass("evf-premium-sidebar-hidden"),i(".everest-forms-toggle-text").text("Show Sidebar"))})}),i(document).on("init_perfect_scrollbar",function(){1<=i("nav.evf-nav-tab-wrapper").length&&(window.evf_nav_ps=new PerfectScrollbar("nav.evf-nav-tab-wrapper",{suppressScrollY:!0,useBothWheelAxes:!0,wheelPropagation:!0}))}),window.addEventListener("resize orientationchange",function(){var e;1<=i("nav.evf-nav-tab-wrapper").length&&(clearTimeout(e),setTimeout(function(){window.evf_nav_ps.update()},400))}),i(document).ready(function(e){"undefined"!=typeof PerfectScrollbar&&e(document).trigger("init_perfect_scrollbar")}),i(document.body).on("evf_add_error_tip",function(e,t,r,o){var n=t.position();0===t.parent().find(".evf_error_tip").length&&(t.after('<div class="evf_error_tip '+r+'">'+o[r]+"</div>"),t.parent().find(".evf_error_tip").css("left",n.left+t.width()-t.width()/2-i(".evf_error_tip").width()/2).css("top",n.top+t.height()).fadeIn("100"))}).on("evf_remove_error_tip",function(e,t,r){t.parent().find(".evf_error_tip."+r).fadeOut("100",function(){i(this).remove()})}).on("click","input:not([type=number])",function(){i(".evf_error_tip").fadeOut("100",function(){i(this).remove()})}).on("blur",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){i(".evf_error_tip").fadeOut("100",function(){i(this).remove()})}).on("change",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){var e=i(this).is(".evf-input-number")?new RegExp("[^-0-9]+","gi"):new RegExp("[^a-z0-9_-]+","gi"),t=i(this).val(),e=t.replace(e,"");t!==e&&i(this).val(e)}).on("keyup",".evf-input-meta-key[type=text]",function(){i(this).is(".evf-input-meta-key")&&(r=new RegExp("[^a-z0-9_-]+","gi"),e="i18n_field_meta_key_error");var e,t=i(this).val(),r=t.replace(r,"");t!==r?i(document.body).triggerHandler("evf_add_error_tip",[i(this),e,n]):i(document.body).triggerHandler("evf_remove_error_tip",[i(this),e])}).on("keyup focus",".evf-input-number[type=number]",function(){var e=i(this).parent().data("fieldId")?i(this).parent().data("fieldId"):i(this).closest(".everest-forms-field-option-row").data("field-id"),t=i("input#everest-forms-field-option-"+e+"-max_value"),e=i("input#everest-forms-field-option-"+e+"-min_value"),t=t.val(),e=e.val();0!==e.length&&0!==t.length&&(parseFloat(e)>parseFloat(t)?-1!==i(this).attr("id").indexOf("min_value")?i(document.body).triggerHandler("evf_add_error_tip",[i(this),"i18n_field_min_value_greater",n]):i(document.body).triggerHandler("evf_add_error_tip",[i(this),"i18n_field_max_value_smaller",n]):(i(document.body).triggerHandler("evf_remove_error_tip",[i(this),"i18n_field_max_value_smaller"]),i(document.body).triggerHandler("evf_remove_error_tip",[i(this),"i18n_field_min_value_greater"])))}).on("keydown click",".evf-max-file-number[type=number]",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1}).on("focusout",".evf-input-number[type=number]",function(e){var t=i(this).parent().data("fieldId")?i(this).parent().data("fieldId"):i(this).closest(".everest-forms-field-option-row").data("field-id"),r=i("input#everest-forms-field-option-"+t+"-max_value"),t=i("input#everest-forms-field-option-"+t+"-min_value"),o=parseFloat(r.val()),n=parseFloat(t.val());(o<n||""===r.val()&&""!==t.val())&&r.val(n+1)}).on("click",".everest-forms-field-number, .everest-forms-field-range-slider",function(e){var t=i(this).data("field-id");i(document).on("keydown click","#everest-forms-field-option-"+t+"-default_value",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1}),i(document).on("keyup focus","#everest-forms-field-option-"+t+"-default_value",function(e){var t=i(this).parent().data("fieldId")?i(this).parent().data("fieldId"):i(this).closest(".everest-forms-field-option-row").data("field-id"),r=i("input#everest-forms-field-option-"+t+"-max_value"),t=i("input#everest-forms-field-option-"+t+"-min_value"),r=r.val(),t=t.val(),e=e.target.value,o=i(this);0!==t.length&&(0!==r.length&&parseFloat(e)>parseFloat(r)?(i(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_smaller"]),i(document.body).triggerHandler("evf_add_error_tip",[o,"i18n_field_def_value_greater",n])):i(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_greater"]),0!==e.length&&parseFloat(e)<parseFloat(t)?(i(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_greater"]),i(document.body).triggerHandler("evf_add_error_tip",[o,"i18n_field_def_value_smaller",n])):i(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_smaller"]))}).on("focusout","#everest-forms-field-option-"+t+"-default_value",function(e){var t=i(this).parent().data("fieldId")?i(this).parent().data("fieldId"):i(this).closest(".everest-forms-field-option-row").data("field-id"),r=i("input#everest-forms-field-option-"+t+"-max_value"),t=i("input#everest-forms-field-option-"+t+"-min_value"),r=parseFloat(r.val()),t=parseFloat(t.val()),o=parseFloat(e.target.value);(o<t||r<o)&&(e.target.value="")})}).on("click",".everest-forms-field-payment-quantity",function(e){var t=i(this).data("field-id");i(document).on("keydown click","#everest-forms-field-option-"+t+"-default_value",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1})}).on("init_tooltips",function(){i(".tips, .help_tip, .everest-forms-help-tip, .everest-forms-help-tooltip, .everest-forms-icon").tooltipster({maxWidth:200,multiple:!0,interactive:!0,trigger:"custom",triggerOpen:{mouseenter:!0,click:!0,tap:!0},triggerClose:{mouseleave:!0,click:!0,tap:!0},position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){t=i(t.origin).attr("data-tip");t&&e.content(t)}})}),i("body").on("mouseenter",".evf-content-email-settings-inner .everest-forms-help-tooltip:not(.tooltipstered)",function(){i(this).tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,trigger:"custom",triggerOpen:{mouseenter:!0,click:!0,tap:!0},triggerClose:{mouseleave:!0,click:!0,tap:!0},restoration:"current",functionInit:function(e,t){t=i(t.origin).attr("data-tip");t&&e.content(t)}}),i(this).tooltipster("open")}),i(document).on("click",".everest-forms-email-add",function(){i(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),i(document).on("click",".everest-forms-email-duplicate",function(){i(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),i(document.body).trigger("init_tooltips"),i(document).on("heartbeat-send",function(e,t){var r=i("#everest-forms-entries-list"),o=r.find("#entries-list").data("form-id");last_entry_id=r.find("#entries-list").data("last-entry-id"),r.length&&"undefined"!=typeof last_entry_id&&(t.evf_new_entries_form_id=o,t.evf_new_entries_last_entry_id=last_entry_id)}),i(document).on("heartbeat-tick",function(e,t){var r=i("#everest-forms-entries-list"),o=r.find(".wp-list-table thead tr:first-child > :visible").length;r.length&&t.evf_new_entries_notification&&(r.find(".new-entries-notification").length||r.find(".wp-list-table thead").append('<tr class="new-entries-notification"><td colspan="'+o+'"><a href="#new" onClick="window.location.reload(true);"></a></td></tr>'),r.find(".new-entries-notification a").text(t.evf_new_entries_notification).slideDown({duration:500,start:function(){i(this).css({display:"block"})}}))}),i(document).on("click","#everest-forms-welcome .welcome-video-play",function(e){e.preventDefault(),i(this).find(".everest-froms-welcome-thumb").remove(),i(this).append('<div class="welcome-video-container"><iframe width="760" height="429" src="https://www.youtube.com/embed/N_HbZccA-Ts?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>')}),i("#everest-forms-import").on("change",function(e){var t=i("#everest-forms-import").prop("files")[0];i("#import-file-name").html(t.name)}),i(".everest-forms-export-form-action").on("click",function(){var e=i(this).closest(".everest-forms-export-form").find("#everest-forms-form-export").val();if(i(this).closest(".everest-forms-export-form").find("#message").remove(),!e)return i(this).closest(".everest-forms-export-form").find("h3").after('<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+everest_forms_admin.i18n_form_export_action_error+"</strong></p></div>"),!1}),i(".everest_forms_import_action").on("click",function(){var e=i("#everest-forms-import").prop("files")[0],t=new FormData;t.append("jsonfile",e),t.append("action","everest_forms_import_form_action"),t.append("security",everest_forms_admin.ajax_import_nonce),i.ajax({url:evf_email_params.ajax_url,dataType:"json",cache:!1,contentType:!1,processData:!1,data:t,type:"POST",beforeSend:function(){i(".everest_forms_import_action").closest(".everest_forms_import_action").append('<i class="evf-loading evf-loading-active"></i>'),i(".everest-froms-import_notice").remove()},complete:function(e){var t="";i(".everest_forms_import_action").closest(".everest_forms_import_action").find(".evf-loading").remove(),i(".everest-froms-import_notice").remove(),t=!0===e.responseJSON.success?'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>":'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>",i(".everest-forms-import-form").find("h3").after(t),i("#everest-forms-import").val(""),i("#import-file-name").html("No file selected")}})}),i(".everest-forms-btn-group .everest-forms-btn").on("click",function(){i(this).siblings().removeClass("is-active"),i(this).addClass("is-active")}),i(document).find(".evf-form-locate").on("click",function(e){e.preventDefault();var t={action:"everest_forms_locate_form_action",id:i(this).data("id"),security:everest_forms_admin_locate.ajax_locate_nonce},r=e.target.closest(".row-actions");i.ajax({url:everest_forms_admin_locate.ajax_url,dataType:"json",cache:!1,data:t,type:"POST",beforeSend:function(){i(r).append('<i class="evf-loading evf-loading-active"></i>')},success:function(e){var o,n;0<Object.keys(e.data).length?(o='<div class="locate-form"><span>'+everest_forms_admin_locate.form_found+"</span>",n=1,i.each(e.data,function(e,t){1<n&&(o+=", ");var r=e.split(" ");4<r.length&&(e=r.slice(0,4).join(" ")+"..."),o+=' <a href="'+t+'" target="_blank">'+e+"</a>",n++}),o+="</div>",0!==i(r).prev(".locate-form").length&&i(r).prev(".locate-form").remove(),i(r).before(o)):(0!==i(r).prev(".locate-form").length&&i(r).prev(".locate-form").remove(),i(r).before('<div class="locate-form"><span>'+everest_forms_admin_locate.form_found_error+"</span></div>")),i(r).find(".evf-loading").remove()}})}),i(".evf-fm-dismiss-notice").on("click",function(e){e.preventDefault();e={action:"everest_forms_fm_dismiss_notice",option_id:i(this).data("option-id"),security:everest_forms_admin_form_migrator.evf_fm_dismiss_notice_nonce};i.ajax({url:everest_forms_admin_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,success:function(e){e.success&&i(".evf-fm-notice").hide()}})}),i(".evf-smart-phone-field").each(function(e,t){var r=i(t),o=r.attr("name");setTimeout(function(){i('input[name="'+o+'"]').val(r.val())},2e3)}),i(".everest-forms-system-info-setting-copy").tooltipster({content:"Copied",trigger:"click",theme:"tooltipster-noir",interactive:!0,functionBefore:function(e,t){var r=i(".everest-forms-system-info-setting table")[0],o=document.createRange();o.selectNode(r),window.getSelection().removeAllRanges(),window.getSelection().addRange(o),document.execCommand("copy"),window.getSelection().removeAllRanges()}}),i(document).ready(function(){i("#everest_forms_search_addons").on("keyup search",function(){var t=i(this).val().toLowerCase(),r=!1;i(".the-list .plugin-card").each(function(){var e=i(this);-1<e.text().toLowerCase().indexOf(t)?(e.show(),r=!0):e.hide()}),r?(i(".refresh").show(),i("#evf_addon_no_result_found").hide()):(i(".refresh").hide(),i("#evf_addon_no_result_found").remove(),i(".refresh").after('<p id="evf_addon_no_result_found">No Result Found</p>'))})}),i("#everest_forms_enable_restapi").is(":checked")?i(document).find(".evf-restapi-key-wrapper").show():i(document).find(".evf-restapi-key-wrapper").hide(),i("#everest_forms_enable_restapi").on("click",function(e){e=e.target.checked;e?i(document).find(".evf-restapi-key-wrapper").show():i(document).find(".evf-restapi-key-wrapper").hide()}),i("#everest_forms_restapi_keys").on("click",function(e){evfClearClipboard(),evfSetClipboard(i(this).val(),i(this)),e.preventDefault()}).on("aftercopy",function(){i(this).tooltipster("content",i(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=i(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},5e3)})}),i(".everest-forms-generate-api-key, .everest-forms-regenerate-api-key").on("click",function(){let t=i(this).data("id");var e={action:"everest_forms_generate_restapi_key",security:everest_forms_admin_generate_restapi_key.ajax_restapi_key_nonce};i.ajax({url:everest_forms_admin_generate_restapi_key.ajax_url,type:"post",data:e,success:e=>{i(document).find("#"+t).val(e.data)}})}),i(".everest_forms_install_and_activate_smart_smtp").on("click",function(){var e={action:"everest_forms_install_and_activate_smart_smtp",security:everest_forms_admin.smart_smtp_install_and_activate_nonce};try{i.ajax({url:everest_forms_admin.ajax_url,method:"POST",data:e,beforeSend:function(){i(".everest_forms_install_and_activate_smart_smtp").append('<i class="evf-loading evf-loading-active"></i>')},success:function(e){i(".everest_forms_install_and_activate_smart_smtp").find(".evf-loading").remove();var e=e.data,t=e.message,e=e.redirection_url;""!==t&&""!==e?(i(".everest_forms_install_and_activate_smart_smtp").closest(".everest-forms-smart-smtp-page-setup__inner-wrapper").find(".everest_forms_install_and_activate_smart_smtp").removeClass("everest_forms_install_and_activate_smart_smtp everest-forms-btn-primary").addClass("everest_forms_install_and_activated_smart_smtp everest-forms-btn-secondary").css("pointer-events","none").text("Installed and Activated SmartSMTP"),window.location.replace(e)):""!==t&&""===e&&alert(t)},error:function(e){i(".everest_forms_install_and_activate_smart_smtp").find(".evf-loading").remove();e=e.data.message;alert(e),window.location.reload()}})}catch(t){i(".everest_forms_install_and_activate_smart_smtp").find(".evf-loading").remove(),alert(t),window.location.reload()}}),i(document).on("click",".evf-manage-tags",function(e){e.preventDefault();var t=i("#filter-by-tags").val();t&&0!==t.length&&i.confirm({title:"Delete Tags",theme:"modern",type:"red",boxClass:"evf-delete-tags-popup",boxWidth:"25%",useBootstrap:!1,backgroundDismiss:!0,content:evf_admin_manage_tags.manage_tags_title+'<br><div style="color: #ff4d4f; padding-top: 20px; padding-bottom:20px"><i class="fa fa-exclamation-triangle" aria-hidden="true" style="margin-right: 2px;"></i>'+evf_admin_manage_tags.manage_tags_desc+"</div>",buttons:{confirm:{text:"Delete",btnClass:"btn-red",action:function(){i.ajax({type:"POST",url:evf_admin_manage_tags.ajax_url,data:{action:"everest_forms_delete_form_tags",tags:t,security:evf_admin_manage_tags.ajax_manage_tags_nonce},success:function(e){}}),window.location.reload()}},cancel:{text:"Cancel",btnClass:"btn-gray"}},type:"blue",boxWidth:"565px",boxHeight:"200px"})});var e=i("#filter-by-tags"),t=i(".evf-manage-tags");t.prop("disabled",!e.val()||0===e.val().length),e.on("change",function(){t.prop("disabled",!i(this).val()||0===i(this).val().length)}),i(".form-tags-select2").each(function(){var r=i(this);r.select2({placeholder:i(this).data("placeholder"),tags:!0,createTag:function(e){var t;return""===e.term.trim()||(t=!1,r.find("option").each(function(){if(i(this).text()===e.term)return!(t=!0)}),t)?null:{id:e.term,text:e.term,isNew:!0}},templateResult:function(e){var t=i("<span></span>");return t.text(e.text),e.isNew&&t.append(" <em>(new)</em>"),t}}).on("select2:select",function(e){var t;e.params&&e.params.data.isNew&&(t=e.params.data.text,r.find("option").filter(function(){return i(this).val()===t&&!i(this).prop("selected")}).remove(),r.find("option").filter(function(){return i(this).val()===t&&i(this).data("select2-tag")}).remove(),e=new Option(t,t,!0,!0),r.append(e).trigger("change"),r.trigger("select2:select"))})}),i(".evf-bulk-form-tags-select").trigger("evf-enhanced-tags-select-init"),i(document).on("click",".evf-update-bulk-tags",function(){var e=i(this).closest(".evf-bulk-edit-forms-tags-container"),t=i(e).find("#bulk_tag_forms").val(),e=i(e).find("#bulk_tags").val();t&&0!==t.length&&i.ajax({type:"POST",url:evf_admin_manage_tags.ajax_url,data:{action:"everest_forms_update_tags_in_bulk",tags:e,forms:t,security:evf_admin_manage_tags.ajax_manage_tags_nonce},success:function(e){window.location.reload()}})})}(jQuery,everest_forms_admin);